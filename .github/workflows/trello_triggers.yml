# name of the workflow
name: Create Trello Card on Action

# Events to be triggered
on:
    # Trigger on push, pull request, and create events
  push:
    branches:
      - main
  pull_request:
  create:

# Jobs to be executed
jobs:
  create_trello_card:
    # The type of OS server to run the job on
    runs-on: ubuntu-latest
    # Steps to be executed in the job
    steps:
      - name: Create Trello Card
      # Using TrisNol Trello Card Action
        uses: TrisNol/trello-create-card-action@main
        # inputting the key, token, list-id, name, and description for the Trello card
        with:
            # Setting the card name to include the GitHub event name
          card_name: "New GitHub Action Triggered: ${{ github.ref_name }}"
          card_description: "This card was created automatically by a GitHub Action triggered by the event: `${{ github.event_name }}`. See more details at ${{ github.server_url }}/${{ github.repository }}/commit/${{ github.sha }}."

          # Trello API credentials and card details from GitHub Secrets
          api_key: ${{ secrets.TRELLO_API_KEY }}
          token: ${{ secrets.TRELLO_API_TOKEN }}
          board_id: ${{ secrets.TRELLO_BOARD_ID }}
          list_id: ${{ secrets.TRELLO_LIST_ID }}